{"version":3,"sources":["assets\\Scripts\\Manager\\PlayerDataManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { EventManager } from \"../../FrameWork/manager/EventManager\";\nimport { GameStateType } from \"../Enum\";\nimport { GameUI } from \"../EventName\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class PlayerDataManager extends cc.Component {\n\n    private static _instance:PlayerDataManager=null\n    public static getInstance():PlayerDataManager{\n        return PlayerDataManager._instance\n    }\n\n    onLoad () {\n        if(null===PlayerDataManager._instance){\n            PlayerDataManager._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n    }\n\n    private userData:any = null;\n    private gameState:GameStateType=GameStateType.None;\n    public  bufferState=[];\n    \n    set gameStateType(value:GameStateType){\n        this.gameState=value\n    }\n    get gameStateType():GameStateType{\n        return this.gameState\n    }\n\n    save(){\n        var str = JSON.stringify(this.userData);\n        cc.sys.localStorage.setItem('userData',str );\n    }\n    load(){\n        var str = cc.sys.localStorage.getItem('userData');\n        if( str == null || str == '' ){\n            this.userData = {}\n            return;\n        }\n        this.userData = JSON.parse(str);\n    }\n    del(){\n        cc.sys.localStorage.removeItem('userData');\n    }\n\n    getGold(){\n        if( this.userData.gold == null ){\n            this.userData.gold = 0;\n        }\n        return this.userData.gold;\n    }\n    setGold(gold){\n        this.userData.gold = gold;\n        this.save();\n    }\n    subGold(subNum){\n        if( this.userData.gold == null ){\n            this.userData.gold = 0;\n        }\n        this.userData.gold -= subNum;\n        this.save();\n\n        EventManager.getInstance().emit(GameUI.refreshGoldDiamond);\n    }\n    addGold(addNum){\n        if( this.userData.gold == null ){\n            this.userData.gold = 0;\n        }\n        this.userData.gold += addNum;\n        this.save();\n    \n        EventManager.getInstance().emit(GameUI.refreshGoldDiamond);\n    }\n    getDiamond(){\n        if( this.userData.diamond == null ){\n            this.userData.diamond = 30;\n        }\n        return this.userData.diamond;\n    }\n    setDiamond(diamond){\n        this.userData.diamond = diamond;\n        this.save();\n    }\n    subDiamond(subNum){\n        if( this.userData.diamond == null ){\n            this.userData.diamond = 0;\n        }\n        this.userData.diamond -= subNum;\n        this.save();\n\n        EventManager.getInstance().emit(GameUI.refreshGoldDiamond);\n    }\n    addDiamond(addNum){\n        if( this.userData.diamond == null ){\n            this.userData.diamond = 0;\n        }\n        this.userData.diamond += addNum;\n        this.save();\n\n        EventManager.getInstance().emit(GameUI.refreshGoldDiamond);\n    }\n    //大关卡\n    getBigCheckPointCount(){\n\n        if( this.userData.bigCheckPointCount == null ){\n            this.userData.bigCheckPointCount = 0;\n        }\n        return this.userData.bigCheckPointCount;\n    }\n    setBigCheckPointCount(big){\n        this.userData.bigCheckPointCount = big;\n    }\n    addBigCheckPointCount(){\n        if( this.userData.bigCheckPointCount == null ){\n            this.userData.bigCheckPointCount = 0;\n        }\n        this.save();\n        return this.userData.bigCheckPointCount++;\n    }\n    subBigCheckPointCount(){\n\n        if( this.userData.bigCheckPointCount == null ){\n            this.userData.bigCheckPointCount = 0;\n        }\n        if(this.userData.bigCheckPointCount == 0 ){\n            return 0;\n        }\n        this.save();\n        return this.userData.bigCheckPointCount--;\n    }\n\n    //小关卡\n    getSmallCheckPointCount(){\n\n        if( this.userData.smallCheckPointCount == null ){\n            this.userData.smallCheckPointCount = 0;\n        }\n        return this.userData.smallCheckPointCount;\n    }\n    setSmallCheckPointCount(small){\n        this.userData.smallCheckPointCount = small;\n    }\n    addSmallCheckPointCount(){\n        if( this.userData.smallCheckPointCount == null ){\n            this.userData.smallCheckPointCount = 0;\n        }\n        this.save();\n        return this.userData.smallCheckPointCount++;\n    }\n    subSmallCheckPointCount(){\n        if( this.userData.smallCheckPointCount == null ){\n            this.userData.smallCheckPointCount = 0;\n        }\n        if(this.userData.smallCheckPointCount == 0 ){\n            return 0;\n        }\n        this.save();\n        return this.userData.bigCheckPointCount--;\n    }\n    getCheckPoint(){\n        var checkPoint :any= {}\n        checkPoint.big = this.getBigCheckPointCount();\n        checkPoint.small = this.getSmallCheckPointCount();\n        // checkPoint.big = 10;\n        return checkPoint;\n    }\n    getTaskByID=function(taskID){\n        if(this.userData.taskData == null){\n            this.userData.taskData = []\n        }\n        if( this.userData.taskData[taskID] == null ){\n            this.userData.taskData[taskID]={}\n        }\n        if( this.userData.taskData[taskID].curCount == null){\n            this.userData.taskData[taskID].curCount = 0;\n        }\n        \n        if( this.userData.taskData[taskID].maxIndex == null){\n            this.userData.taskData[taskID].maxIndex = 0;\n        }\n        return this.userData.taskData[taskID];\n    }\n    addTaskCount(taskID){\n        var item = this.getTaskByID(taskID);\n        if( item == null ){\n            return false;\n        }\n        this.userData.taskData[taskID].curCount++;\n        this.save();\n        return this.userData.taskData[taskID].curCount;\n    }\n    nextTask(taskID){\n        var item = this.getTaskByID(taskID);\n        if( item == null ){\n            return false;\n        }\n        this.userData.taskData[taskID].curCount = 0;\n        this.userData.taskData[taskID].maxIndex++;\n        this.save();\n        return this.userData.taskData[taskID].curCount;\n\n    }\n    //强化\n    getInternsifLevel=function(ID){\n        if(this.userData.internsifLevel == null){\n            this.userData.internsifLevel = [];\n        }\n        if(this.userData.internsifLevel[ID] == null){\n            this.userData.internsifLevel[ID] = 0;\n        }\n\n        \n        return this.userData.internsifLevel[ID];\n    }\n    addInternsifLevel(ID){\n        if(this.userData.internsifLevel == null){\n            this.userData.internsifLevel = [];\n        }\n        if(this.userData.internsifLevel[ID] == null){\n            this.userData.internsifLevel[ID] = 0;\n        }\n\n        this.userData.internsifLevel[ID]++;\n        this.save();\n        return this.userData.internsifLevel[ID];\n    }\n}\n"]}