{"version":3,"sources":["assets\\Scripts\\ECS\\EntityUtils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { ResManagerPro } from \"../../FrameWork/manager/ResManagerPro\";\nimport { util } from \"../../FrameWork/Utils/util\";\nimport DataManager from \"../data/DataManager\";\nimport AttackComponent from \"./Components/AttackComponent\";\nimport BaseComponent from \"./Components/BaseComponent\";\nimport RoleComponent from \"./Components/RoleComponent\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class EntityUtils extends cc.Component {\n\n    private static _instance:EntityUtils=null\n    public static getInstance():EntityUtils{\n        return EntityUtils._instance\n    }\n\n    onLoad () {\n        if(null===EntityUtils._instance){\n            EntityUtils._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n    }\n\n    public  updateMonsterDirection(start:cc.Vec3,end:cc.Vec3,baseComponent:BaseComponent){\n        if( end.x > start.x){\n            baseComponent.gameObject.getChildByName(\"item\").getChildByName(\"scale\").getChildByName(\"right\").active=true;\n            baseComponent.gameObject.getChildByName(\"item\").getChildByName(\"scale\").getChildByName(\"left\").active=false;\n        }else if( end.x < start.x){\n            baseComponent.gameObject.getChildByName(\"item\").getChildByName(\"scale\").getChildByName(\"right\").active=false;\n            baseComponent.gameObject.getChildByName(\"item\").getChildByName(\"scale\").getChildByName(\"left\").active=true;\n        }\n    }\n\n    public  cannonCompare(roleComponent1:RoleComponent,roleComponent2:RoleComponent){\n        return roleComponent1.level==roleComponent2.level;\n    }\n\n    public  async cannonLevelUp(roleComponent:RoleComponent,baseComponent:BaseComponent,attackComponent:AttackComponent){\n        roleComponent.level++;\n        var level = roleComponent.level;\n\n        var lvData = DataManager.getInstance().cannonUpLevel[level];\n        var index = Math.floor(lvData.level/3);\n        let name = ''+lvData.type+'_'+index;\n        let padSpriteAtlas=await ResManagerPro.Instance.IE_GetAsset(\"texture\",\"cannon/pad\",cc.SpriteAtlas) as cc.SpriteAtlas;\n        let frame = padSpriteAtlas.getSpriteFrame(name);\n        baseComponent.gameObject.getChildByName(\"pad\").getComponent(cc.Sprite).spriteFrame = frame;\n        baseComponent.gameObject.getChildByName(\"ui_towerLevel\").getChildByName(\"lv\").getComponent(cc.Label).string = ''+(lvData.level+1);\n\n        baseComponent.gameObject.getChildByName(\"gun\").removeAllChildren();\n        let gunPrefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"gun/gun_\"+lvData.type,cc.Prefab) as cc.Prefab;\n        let gunNode=cc.instantiate(gunPrefab);\n        baseComponent.gameObject.getChildByName(\"gun\").addChild(gunNode);\n\n        let angle=util.randomNum(0,360);\n        baseComponent.gameObject.getChildByName(\"gun\").angle=angle;\n\n\n        roleComponent.type=lvData.type;\n\n        attackComponent.atk=lvData.atk;\n    }\n}\n"]}