{"version":3,"sources":["assets\\Scripts\\ECS\\Systems\\CollectHitSystem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAOA,+CAAyC;AAEzC;IAA8C,oCAAY;IAA1D;;IA+BA,CAAC;IA5BiB,4BAAW,GAAzB;QACI,OAAO,gBAAgB,CAAC,SAAS,CAAA;IACrC,CAAC;IAED,iCAAM,GAAN;QACI,IAAG,IAAI,KAAG,gBAAgB,CAAC,SAAS,EAAC;YACjC,gBAAgB,CAAC,SAAS,GAAC,IAAI,CAAA;SAClC;aACG;YACA,IAAI,CAAC,OAAO,EAAE,CAAA;YACd,OAAM;SACT;IACL,CAAC;IAED,mCAAQ,GAAR,UAAS,GAAU,EAAC,MAAc,EAAC,mBAAiC,EAAC,oBAAmC,EAAC,wBAA2C,EAAC,mBAAiC,EAClL,oBAAkC,EAAC,oBAAkC,EAAC,sBAAsC;QAE5G,IAAI,CAAC,GAAC,wBAAwB,CAAC,CAAC,GAAC,CAAC,CAAA;QAClC,IAAI,CAAC,GAAC,wBAAwB,CAAC,CAAC,GAAC,oBAAoB,CAAC,MAAM,GAAC,CAAC,CAAA;QAE9D,IAAI,IAAI,GAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,EAAC,oBAAoB,CAAC,KAAK,EAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC;QACjF,IAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAC;YACrB,sBAAY,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,GAAG,EAAC,mBAAmB,EAAC,oBAAoB,EAAC,oBAAoB,EAAC,sBAAsB,CAAC,CAAC;YACvI,OAAO,IAAI,CAAC;SACf;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IA5Bc,0BAAS,GAAkB,IAAI,CAAA;IA6BlD,uBAAC;CA/BD,AA+BC,CA/B6C,EAAE,CAAC,SAAS,GA+BzD;kBA/BoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import { UnitState } from \"../../Enum\"\nimport AttackComponent from \"../Components/AttackComponent\"\nimport BaseComponent from \"../Components/BaseComponent\"\nimport RoleComponent from \"../Components/RoleComponent\"\nimport ShapeComponent from \"../Components/ShapeComponent\"\nimport TransformComponent from \"../Components/TransformComponent\"\nimport UnitComponent from \"../Components/UnitComponent\"\nimport AttackSystem from \"./AttackSystem\"\n\nexport default class CollectHitSystem extends cc.Component {\n\n    private static _instance:CollectHitSystem=null\n    public static getInstance():CollectHitSystem{\n        return CollectHitSystem._instance\n    }\n\n    onLoad () {\n        if(null===CollectHitSystem._instance){\n            CollectHitSystem._instance=this\n        }\n        else{\n            this.destroy()\n            return\n        }\n    }\n\n    onUpdate(atk:number,hitPos:cc.Vec2,bulletRoleComponent:RoleComponent,bulletShapeComponent:ShapeComponent,bulletTransformComponent:TransformComponent,bulletUnitComponent:UnitComponent,\n        monsterUnitComponent:UnitComponent,monsterBaseComponent:BaseComponent,monsterAttackComponent:AttackComponent) {\n        \n        let x=bulletTransformComponent.x-0\n        let y=bulletTransformComponent.y-bulletShapeComponent.height/2\n\n        let rect=new cc.Rect(x,y,bulletShapeComponent.width,bulletShapeComponent.height);\n        if(rect.contains(hitPos)){\n            AttackSystem.getInstance().attackStartAction(atk,bulletUnitComponent,monsterUnitComponent,monsterBaseComponent,monsterAttackComponent);\n            return true;\n        }\n\n        return false;\n    }\n}\n"]}