{"version":3,"sources":["assets\\Scripts\\UI\\CityControl.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEtF,+DAA8D;AAC9D,iEAA4D;AAC5D,0DAAyD;AACzD,gCAA2B;AAErB,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAAyC,+BAAS;IAAlD;QAAA,qEAkEC;QAjEG,wBAAwB;QAChB,UAAI,GAAS,IAAI,CAAA;;QA+DzB,iBAAiB;IACrB,CAAC;IA/DG,4BAAM,GAAN;QACI,iBAAM,MAAM,WAAE,CAAA;QACd,IAAI,CAAC,IAAI,GAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;QAEnC,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,cAAI,CAAC,SAAS,CAAC,UAAU,EAAC,IAAI,EAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAC3F,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,cAAI,CAAC,SAAS,CAAC,UAAU,EAAC,IAAI,EAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAC3F,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,cAAI,CAAC,SAAS,CAAC,UAAU,EAAC,IAAI,EAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAC3F,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,cAAI,CAAC,SAAS,CAAC,WAAW,EAAC,IAAI,EAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QAE7F,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,EAAC,IAAI,CAAC,aAAa,EAAC,IAAI,CAAC,CAAA;IACxE,CAAC;IAED,mCAAa,GAAb;QACI,IAAI,MAAM,GAAS,qBAAS,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,WAAW,EAAC,IAAI,CAAC,IAAI,CAAC,CAAA;QACxE,IAAG,MAAM,EACT;YACI,IAAI,KAAK,GAAC,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAA;YAChD,IAAI,QAAQ,GAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACtD,IAAI,OAAO,GAAC,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,CAAA;YACpD,MAAM,CAAC,CAAC,GAAC,OAAO,CAAC,CAAC,CAAA;YAClB,MAAM,CAAC,CAAC,GAAC,OAAO,CAAC,CAAC,CAAA;SACrB;IACL,CAAC;IAED,gCAAU,GAAV,UAAW,CAAC,EAAC,CAAqB;QAC9B,2BAA2B;IAC/B,CAAC;IAED,gCAAU,GAAV,UAAW,CAAC,EAAC,CAAqB;QAC9B,6BAA6B;QAC7B,IAAI,CAAC,GAAC,CAAC,CAAC,QAAQ,EAAE,CAAA;QAClB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,CAAC,CAAC,CAAC,CAAA;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,CAAC,CAAC,CAAC,CAAA;QAChB,IAAI,MAAM,GAAC,EAAE,CAAA;QACb,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,CAAC,CAAC,GAAG,GAAC,EAAE,CAAC,EAAC;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,CAAC,CAAC,GAAG,GAAC,EAAE,CAAC,CAAA;SACxB;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,CAAC,GAAG,GAAC,GAAG,CAAC,EAAC;YACtB,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,CAAC,GAAG,GAAC,GAAG,CAAC,CAAA;SACxB;QAED,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,CAAC,IAAI,GAAC,GAAG,GAAC,CAAC,GAAC,MAAM,EAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,CAAC,IAAI,GAAC,GAAG,GAAC,CAAC,GAAC,MAAM,CAAA;SACjC;QACD,IAAG,IAAI,CAAC,IAAI,CAAC,CAAC,IAAE,GAAG,GAAC,GAAG,GAAC,CAAC,GAAC,MAAM,EAAC;YAC7B,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,GAAG,GAAC,GAAG,GAAC,CAAC,GAAC,MAAM,CAAA;SAC/B;IACL,CAAC;IAED,gCAAU,GAAV,UAAW,CAAC,EAAC,CAAqB;QAC9B,qBAAS,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;QAChD,2BAA2B;IAC/B,CAAC;IAED,iCAAW,GAAX,UAAY,CAAC,EAAC,CAAqB;QAC/B,4BAA4B;IAChC,CAAC;IAED,2BAAK,GAAL;IAEA,CAAC;IA/DgB,WAAW;QAD/B,OAAO;OACa,WAAW,CAkE/B;IAAD,kBAAC;CAlED,AAkEC,CAlEwC,qBAAS,GAkEjD;kBAlEoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { UIManager } from \"../../FrameWork/manager/UIManager\";\r\nimport EventManager from \"../../FrameWork/net/EventManager\";\r\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\r\nimport Enum from \"../Enum\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CityControl extends UIControl {\r\n    // LIFE-CYCLE CALLBACKS:\r\n    private _map:cc.Node=null\r\n    onLoad () {\r\n        super.onLoad()\r\n        this._map=this.getChildByUrl(\"map\")\r\n\r\n        EventManager.getInstance().addEventListener(Enum.EventName.TouchStart,this,this.touchStart)\r\n        EventManager.getInstance().addEventListener(Enum.EventName.TouchMoved,this,this.touchMoved)\r\n        EventManager.getInstance().addEventListener(Enum.EventName.TouchEnded,this,this.touchEnded)\r\n        EventManager.getInstance().addEventListener(Enum.EventName.TouchCancel,this,this.touchCancel)\r\n\r\n        this.buttonAddClickEvent(\"map/build/ID_420\",this.clickBtnEvent,this)\r\n    }\r\n\r\n    clickBtnEvent():void{\r\n        let UINode:cc.Node=UIManager.getInstance().showUI(\"buildBtn1\",this._map)\r\n        if(UINode)\r\n        {\r\n            let id420=this.getChildByUrl(\"map/build/ID_420\")\r\n            let worldPos=id420.convertToWorldSpaceAR(cc.v2(0,-90))\r\n            let nodePos=this._map.convertToNodeSpaceAR(worldPos)\r\n            UINode.x=nodePos.x\r\n            UINode.y=nodePos.y\r\n        }\r\n    }\r\n\r\n    touchStart(_,e:cc.Event.EventTouch):void{\r\n        //console.log(\"touchStart\")\r\n    }\r\n\r\n    touchMoved(_,e:cc.Event.EventTouch):void{\r\n        //console.log(\"touchMoved\",e)\r\n        let p=e.getDelta()\r\n        this._map.x+=p.x\r\n        this._map.y+=p.y\r\n        let _width=59\r\n        if(this._map.y<=(-464+30)){\r\n            this._map.y=(-464+30)\r\n        }\r\n        if(this._map.y>=(560-225)){\r\n            this._map.y=(560-225)\r\n        }\r\n\r\n        if(this._map.x<=-1024+720/2+_width){\r\n            this._map.x=-1024+720/2+_width\r\n        }\r\n        if(this._map.x>=985-720/2+_width){\r\n            this._map.x=985-720/2+_width\r\n        }\r\n    }\r\n\r\n    touchEnded(_,e:cc.Event.EventTouch):void{\r\n        UIManager.getInstance().closePrefab(\"buildBtn1\")\r\n        //console.log(\"touchEnded\")\r\n    }\r\n\r\n    touchCancel(_,e:cc.Event.EventTouch):void{\r\n        //console.log(\"touchCancel\")\r\n    }\r\n\r\n    start () {\r\n\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}