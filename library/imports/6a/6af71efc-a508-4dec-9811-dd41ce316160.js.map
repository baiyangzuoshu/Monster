{"version":3,"sources":["assets\\Scripts\\UI\\GameUIControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { EventManager } from \"../../FrameWork/manager/EventManager\";\nimport { ResManagerPro } from \"../../FrameWork/manager/ResManagerPro\";\nimport { UIManagerPro } from \"../../FrameWork/manager/UIManagerPro\";\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\nimport DataManager from \"../data/DataManager\";\nimport IntensifyDataManager from \"../data/IntensifyDataManager\";\nimport ECSManager from \"../ECS/ECSManager\";\nimport CannonEntity from \"../ECS/Entities/CannonEntity\";\nimport EntityUtils from \"../ECS/EntityUtils\";\nimport { Chengjiou, GameStateType, Intensify, Task } from \"../Enum\";\nimport { GameUI } from \"../EventName\";\nimport MapDataManager from \"../Manager/MapDataManager\";\nimport PlayerDataManager from \"../Manager/PlayerDataManager\";\nimport BossUIControl from \"./BossUIControl\";\nimport CrownControl from \"./CrownControl\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameUIControl extends UIControl {\n    private m_canMakeCount:number = 10;\n    private m_maxMakeCount:number = 10;\n    private m_hammerAction = false;\n    private m_waterAction = false;\n    private m_water:cc.Node = null;\n    private m_hammer:cc.Node = null;\n    private m_makeNumberLabel:cc.Label = null;\n    private m_cannonList = [];\n    private m_curZIndex:number=0;\n    private m_selecetCannon = null;\n    private m_moveCannon = null;\n    private m_moveCannonNode:cc.Node=null;\n    private m_labGold:cc.Label=null;\n    private m_diamond:cc.Label=null;\n    private m_curCrown:cc.Node=null;\n    private m_nextCrown:cc.Node=null;\n    private crownBuild:cc.Node=null;\n    private m_destroyNode:cc.Node=null;\n\n    onLoad () {\n        super.onLoad();\n        PlayerDataManager.getInstance().gameStateType=GameStateType.None;\n        \n        this.m_water=this.getChildByUrl(\"bottom/make/ui_build_water\");\n        this.m_hammer=this.getChildByUrl(\"bottom/make/ui_build_hammer\");\n        this.m_labGold=this.getChildByUrl(\"top/glod/btGlod/ui_coin_rect/gold\").getComponent(cc.Label);\n        this.m_diamond=this.getChildByUrl(\"top/glod/btDiamond/ui_coin_rect/diamond\").getComponent(cc.Label);\n        this.m_makeNumberLabel=this.getChildByUrl(\"bottom/make/num\").getComponent(cc.Label);\n        this.m_destroyNode=this.getChildByUrl(\"bottom/destroy\");\n\n        this.updateGameUI();\n        this.refreshGoldDiamond();\n        this.registerBottomBtn();\n        this.registerUIEvents();\n        this.registerTopBtn();\n    }\n\n    registerUIEvents(){\n        EventManager.getInstance().addEventListener(GameUI.refreshGoldDiamond,this.refreshGoldDiamond,this);\n        EventManager.getInstance().addEventListener(GameUI.gameOver,this.gameOver,this);\n        EventManager.getInstance().addEventListener(GameUI.showSucceed,this.showSucceed,this);\n        EventManager.getInstance().addEventListener(GameUI.showFaild,this.showFaild,this);\n    }\n\n    onDestroy():void{\n        EventManager.getInstance().removeEventListener(GameUI.refreshGoldDiamond,this.refreshGoldDiamond,this);\n        EventManager.getInstance().removeEventListener(GameUI.gameOver,this.gameOver,this);\n        EventManager.getInstance().removeEventListener(GameUI.showSucceed,this.showSucceed,this);\n        EventManager.getInstance().removeEventListener(GameUI.showFaild,this.showFaild,this);\n    }\n\n    async start () {\n        let canvas=cc.find(\"Canvas\");\n        this.m_moveCannonNode=this.getChildByUrl(\"moveCannon\");\n        this.crownBuild=canvas.getChildByName(\"Game\").getChildByName(\"crownBuild\");\n\n        var _cannonList = MapDataManager.getInstance().getCurCannonPoint();\n        for (let i = 0; i < _cannonList.length; i++) {\n            this.m_cannonList[i] = this.createCannonData();\n            this.m_cannonList[i].pos = _cannonList[i];\n        }\n        this.m_curZIndex = 100;\n        this.m_moveCannonNode.on('touchstart',this.touchStart,this);\n        this.m_moveCannonNode.on('touchmove',this.touchMove,this);\n        this.m_moveCannonNode.on('touchend',this.touchEnd,this);\n        this.m_moveCannonNode.on('touchcancel',this.touchCancel,this);\n\n        this.buildEndPoint();\n        \n        let ts=await UIManagerPro.getInstance().showPrefab(\"BossUI\");\n        ts.play(()=>{\n            PlayerDataManager.getInstance().gameStateType=GameStateType.Playing;\n            MapDataManager.getInstance().beginCreateMonster();\n        });\n    }\n\n    gameOver(){\n        this.moveToNextMap();\n        this.showSucceed();\n    }\n\n    async buildEndPoint(){\n        var list = MapDataManager.getInstance().getCurPahtList();\n        var lastPos = list[list.length-1];\n\n        var pos = cc.v2(0,0);\n        pos.x = lastPos.x * 106 + 106/2;\n        pos.y = -lastPos.y * 106 - 106/2;\n\n        if( this.m_curCrown == null ){\n            let crownPrefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"crown\",cc.Prefab) as cc.Prefab;\n            this.m_curCrown = cc.instantiate(crownPrefab);\n            this.crownBuild.addChild( this.m_curCrown);\n            this.m_curCrown.addComponent(CrownControl);\n        }\n        pos.y += 25;\n        this.m_curCrown.setPosition(pos);\n    }\n\n    async setNextCrownPos(pos){\n        if ( this.m_nextCrown == null ){\n            let crownPrefab=await ResManagerPro.Instance.IE_GetAsset(\"prefabs\",\"crown\",cc.Prefab) as cc.Prefab;\n            this.m_nextCrown = cc.instantiate(crownPrefab);\n            this.m_nextCrown.addComponent(CrownControl);\n            this.crownBuild.addChild(this.m_nextCrown);\n        }\n        pos.y += 25;\n        this.m_nextCrown.setPosition(pos);\n    }\n\n    moveToNextMap(){\n        var moveTo = cc.jumpBy(0.5,cc.v2(110*2,-110),110,1);\n        var callFunc = cc.callFunc(function(){\n            //this.crownBuild.setPosition(cc.v2(-320,310));\n            //this.buildEndPoint();\n        }.bind(this));\n\n        this.crownBuild.runAction(cc.sequence(moveTo,callFunc));\n    }\n\n    touchStart(event){\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        this.m_selecetCannon = this.getCannonByPosition(nodePos);\n        if( this.m_selecetCannon != null ){\n            var cannonEntity:CannonEntity = this.m_selecetCannon.cannonEntity;\n            if( cannonEntity != null){\n                if( this.m_moveCannon != null ){\n                    this.m_moveCannon.removeFromParent();\n                    this.m_moveCannon = null;\n                }\n                this.m_moveCannon = cc.instantiate(cannonEntity.baseComponent.gameObject);\n                this.m_moveCannonNode.addChild(this.m_moveCannon);\n                this.m_moveCannon.getChildByName(\"range\").active = true;\n                this.showCannonHint(cannonEntity);\n                this.setShowDestroy(true);\n            }else{\n                this.m_selecetCannon = null;\n            }\n        }\n    }\n    touchMove(event){\n        if( this.m_moveCannon == null) \n            return;\n\n        var delta = event.getDelta();\n        var pos = this.m_moveCannon.getPosition();\n        pos.x += delta.x;\n        pos.y += delta.y;\n        this.m_moveCannon.setPosition(pos);\n\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        var cannon = this.getCannonByPosition(nodePos);\n        if( cannon != null ){\n            var cannonEntity = cannon.cannonEntity as CannonEntity;\n            if( cannonEntity != null){\n                cannonEntity.baseComponent.gameObject.getChildByName(\"range\").active = true;\n            }else{\n                this.hideCannonRange();\n            }\n        }\n    }\n    touchEnd(event){\n        //this.setAllCannonOpacity();\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        var block = this.getCannonByPosition(nodePos);\n        if(block != null){\n            if( this.m_moveCannon != null ){\n                this.changeCannon(this.m_selecetCannon,block);\n            }\n        }\n        \n        if( this.m_moveCannon != null ){\n            this.m_moveCannon.removeFromParent();\n            this.m_moveCannon = null;\n            this.hideCannonHint();\n        }\n        \n        this.hideCannonRange();\n        this.setShowDestroy(false);\n\n        var pos = event.getLocation();\n        if( this.isInDestroy(pos)){\n            // this.m_selecetCannon.cannonEntity.node.removeFromParent();\n            // this.m_selecetCannon.cannonEntity.node.destroy();\n            // this.m_selecetCannon.cannonEntity = null;\n        }\n    }\n    touchCancel(event){\n        //this.setAllCannonOpacity();\n        if( this.m_moveCannon != null ){\n            this.m_moveCannon.removeFromParent();\n            this.m_moveCannon = null;\n        }\n                    \n        this.hideCannonRange();\n        this.setShowDestroy(false);\n\n        var pos = event.getLocation();\n        if( this.isInDestroy(pos)){\n            // this.m_selecetCannon.cannonEntity.node.removeFromParent();\n            // this.m_selecetCannon.cannonEntity.node.destroy();\n            // this.m_selecetCannon.cannon = null;\n        }\n    }\n\n    changeCannon(startItem,endItem){\n        if( startItem.pos.x == endItem.pos.x && \n            startItem.pos.y == endItem.pos.y){\n                return;\n            }\n        let startEntity:CannonEntity=startItem.cannonEntity;\n        let endEntity:CannonEntity=endItem.cannonEntity;\n        if( startEntity == null ){\n            return;\n        }\n        //3.结束为有炮,需要合成.\n        var playEffect = false;\n        if( endEntity != null ){\n            if( EntityUtils.getInstance().cannonCompare(startEntity.roleComponent,endEntity.roleComponent)){\n                EntityUtils.getInstance().cannonLevelUp(startEntity.roleComponent,startEntity.baseComponent);\n                endEntity.unitComponent.isDead=true;\n                endEntity.baseComponent.gameObject.destroy();\n                endEntity = null;\n                playEffect = true;\n                //\n                PlayerDataManager.getInstance().addTaskCount(Task.TASK_HEBING_FANGYUTA);\n                PlayerDataManager.getInstance().addTaskCount(Chengjiou.CHENGJIOU_QIANGHUA_JINENG);\n            }\n        }\n\n        //1.结束位置没有炮\n        if( endItem == null ){\n            // var a = 1;\n            // a = 1;\n\n        }\n        if( endEntity == null ){\n            startEntity.baseComponent.gameObject.x = endItem.pos.x * 106 + 106/2;\n            startEntity.baseComponent.gameObject.y = -endItem.pos.y * 106 - 106/2;\n            startEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            startEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n            \n            endItem.cannonEntity = startItem.cannonEntity;\n            startItem.cannonEntity = endEntity;\n            if( playEffect ){\n                //endEntity.effectAction();\n            }\n        }else{\n            \n            //2.结束位置有炮,但是登陆或类型不同.\n            startEntity.baseComponent.gameObject.x = endItem.pos.x * 106 + 106/2;\n            startEntity.baseComponent.gameObject.y = -endItem.pos.y * 106 - 106/2;\n            startEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            startEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n\n            endEntity.baseComponent.gameObject.x = startItem.pos.x * 106 + 106/2;\n            endEntity.baseComponent.gameObject.y = -startItem.pos.y * 106 - 106/2;\n            endEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            endEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n\n            endItem.cannonEntity = startItem.cannonEntity;\n            startItem.cannonEntity = endEntity;\n        }\n    }\n\n    showCannonHint(cannon:CannonEntity){\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            let entity = this.m_cannonList[i].cannonEntity as CannonEntity;\n            if( entity != null ){\n                if( entity.roleComponent.level==cannon.roleComponent.level){\n                    entity.baseComponent.gameObject.getChildByName(\"ui_mergeRemind\").active = true;\n                }\n            }\n            \n        }\n    }\n\n    hideCannonHint(){\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            let entity = this.m_cannonList[i].cannonEntity as CannonEntity;\n            if( entity != null ){\n                entity.baseComponent.gameObject.getChildByName(\"ui_mergeRemind\").active = false;\n            }\n        }\n    }\n\n    hideCannonRange(){\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            let cannonEntity = this.m_cannonList[i].cannonEntity as CannonEntity;\n            if( cannonEntity != null ){\n                cannonEntity.baseComponent.gameObject.getChildByName(\"range\").active = false;\n            }    \n        }\n    }\n\n    setShowDestroy(bShow){\n        this.m_destroyNode.active = bShow;        \n    }\n\n    isInDestroy(world_pos){\n        var pos = this.m_destroyNode.convertToNodeSpaceAR(world_pos);\n        if( pos.x < 50 && \n            pos.x > -50 && \n            pos.y < 50 && \n            pos.y > -50){\n                return true;\n            }\n\n        return false;\n    }\n\n    createCannonData(){\n        var obj:any= {};\n        obj.pos = cc.v2(0,0);\n        obj.cannonEntity = null;\n        return obj;\n    }\n\n    getCannonByPosition(nodePos){\n        let x = Math.floor(nodePos.x/106);\n        let y = Math.floor((-nodePos.y)/106);\n        console.log(x,y);\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            if(this.m_cannonList[i].pos.x == x && this.m_cannonList[i].pos.y == y){\n                return this.m_cannonList[i];\n            }\n        }\n        return null;\n    }\n\n    getCanMakeIndex(){\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            if(this.m_cannonList[i].cannonEntity == null ){\n                return i;\n            }\n        }\n        return null;\n    }\n\n    addMakeNumber(){\n        this.m_canMakeCount++;\n        if( this.m_canMakeCount > this.m_maxMakeCount ){\n            this.m_canMakeCount = this.m_maxMakeCount;\n        }\n        this.updateMakeCount();\n    }\n\n    subMakeNumber(){\n        this.m_canMakeCount--;\n        if( this.m_canMakeCount < 0 ){\n            this.m_canMakeCount = 0;\n        }\n        if( !this.m_waterAction ){\n            this.m_water.height = 0;\n        }\n        this.updateMakeCount();\n    }\n\n    updateMakeCount(){\n        this.m_makeNumberLabel.string = '' + this.m_canMakeCount + '/' + this.m_maxMakeCount;\n    }\n\n    async showSucceed(){\n        var checkPoint = DataManager.getInstance().getCurCheckPoint();\n        PlayerDataManager.getInstance().addGold(checkPoint.succedGold);\n        PlayerDataManager.getInstance().addDiamond(checkPoint.diamond);\n        this.updateGameUI();\n\n        if(DataManager.getInstance().isCurBossAttack()){\n            let delayTime = 6;\n            let view=await UIManagerPro.getInstance().showPrefab(\"MapUI\");\n            view.showSucceed(checkPoint.succedGold,checkPoint.diamond);\n\n\n            this.scheduleOnce(function() {\n                if(DataManager.getInstance().isCurBossAttack()){\n                    UIManagerPro.getInstance().closePrefab(\"MapUI\");\n                }else{\n                    UIManagerPro.getInstance().closePrefab(\"SmallSettlementUI\");\n                }\n\n                this.updateGameUI();\n                //g_game.playGame(isBoss);\n            }, delayTime);\n        }else{\n            let delayTime = 2;\n            let view=await UIManagerPro.getInstance().showPrefab(\"SmallSettlementUI\");\n            view.showSucceed(checkPoint.succedGold,checkPoint.diamond);\n\n\n            this.scheduleOnce(function() {\n                if(DataManager.getInstance().isCurBossAttack()){\n                    UIManagerPro.getInstance().closePrefab(\"MapUI\");\n                }else{\n                    UIManagerPro.getInstance().closePrefab(\"SmallSettlementUI\");\n                }\n\n                this.updateGameUI();\n                //g_game.playGame(isBoss);\n            }, delayTime);\n        }\n    }\n\n    async showFaild(){\n        let view=await UIManagerPro.getInstance().showPrefab(\"SmallSettlementUI\");\n        if( view.active )return;\n\n        var checkPoint = DataManager.getInstance().getCurCheckPoint();\n        PlayerDataManager.getInstance().addGold(checkPoint.faildGold);\n        this.updateGameUI();\n        \n        view.showFaild(checkPoint.faildGold);\n\n        this.scheduleOnce(function() {\n            DataManager.getInstance().previousCheckPoint();\n            UIManagerPro.getInstance().closePrefab(\"SmallSettlementUI\");\n            this.updateGameUI();\n            //g_game.playGame();\n        }, 2);\n\n    }\n\n    update (dt) {\n        if( this.m_canMakeCount < this.m_maxMakeCount){\n            this.m_water.height += dt*50;\n            this.m_waterAction = true;\n            if ( this.m_water.height >= 133 ){\n                this.addMakeNumber();\n                if( this.m_canMakeCount == this.m_maxMakeCount){\n                    this.m_water.height = 133;\n                    this.m_waterAction = false;\n                }else{\n                    this.m_water.height = 0;\n                }\n            }\n        }\n    }\n\n    refreshGoldDiamond(){\n        var gold = PlayerDataManager.getInstance().getGold();\n        var diamond = PlayerDataManager.getInstance().getDiamond();\n        this.m_labGold.string = '' + gold;\n        this.m_diamond.string = '' + diamond;\n        //this.updateCheckPoint();\n    }\n\n    updateGameUI(){\n        if( !this.m_waterAction ){\n            this.m_water.height = 0;\n        }\n        \n        var lv = PlayerDataManager.getInstance().getInternsifLevel(Intensify.INTENSIFY_KUORONG);\n        this.m_maxMakeCount = IntensifyDataManager.getInstance().getValue(Intensify.INTENSIFY_KUORONG,lv);\n        this.updateMakeCount();\n    }\n\n    registerBottomBtn(){\n        this.buttonAddClickEvent(\"bottom/make/make\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/make/autoMake\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/intensify\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/shop\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/destroy\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/cannon\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/task/bt\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin0\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin1\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin2\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin3\",this.clickBtnEvent,this);\n    }\n\n    registerTopBtn(){\n        this.buttonAddClickEvent(\"top/glod/btGlod\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"top/glod/btDiamond\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"top/map\",this.clickBtnEvent,this);\n    }\n\n    async clickBtnEvent(btn:cc.Button){\n        console.log(\"clickBtnEvent\",btn.name);\n        if(\"make<Button>\"==btn.name){\n            var index = this.getCanMakeIndex();\n            if( index == null ){\n                return;\n            }\n            if( this.m_canMakeCount == 0){\n                return;\n            }\n            if(!this.m_hammerAction ){\n                var  rot1 = cc.rotateTo(0.2,-90);\n                var rot2 = cc.rotateTo(0.2,0);\n                var callFunc = cc.callFunc(function(){\n                    this.m_hammerAction = false;\n                }.bind(this));\n                var seq = cc.sequence(rot1,rot2,callFunc);\n                this.m_hammer.runAction(seq);\n\n                this.m_hammerAction = true;\n            }\n            \n            this.subMakeNumber();\n            \n            let cannonEntity=await ECSManager.getInstance().createCannonEntity(index,0);\n            this.m_cannonList[index].cannonEntity=cannonEntity;\n        }\n        else if(\"map<Button>\"==btn.name){\n            UIManagerPro.getInstance().showPrefab(\"MapUI\");\n        }\n        else if(\"btGlod<Button>\"==btn.name){\n            PlayerDataManager.getInstance().addGold(100);\n        }\n        else if(\"btDiamond<Button>\"==btn.name){\n            PlayerDataManager.getInstance().addDiamond(100);\n        }\n        else if(\"bt<Button>\"==btn.name){\n            UIManagerPro.getInstance().showPrefab(\"TaskUI\");\n        }\n        else if(\"autoMake<Button>\"==btn.name){\n\n        }\n        else if(\"intensify<Button>\"==btn.name){\n            UIManagerPro.getInstance().showPrefab(\"IntensifyUI\");\n        }\n        else if(\"shop<Button>\"==btn.name){\n\n        }\n        else if(\"destroy<Button>\"==btn.name){\n\n        }\n        else if(\"cannon<Button>\"==btn.name){\n\n        }\n        else if(\"bt<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin0<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin1<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin2<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin3<Button>\"==btn.name){\n            \n        }\n\n    }\n\n}\n\n\n"]}