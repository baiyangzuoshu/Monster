{"version":3,"sources":["assets\\Scripts\\UI\\GameUIControl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport { UIControl } from \"../../FrameWork/ui/UIControl\";\nimport IntensifyDataManager from \"../data/IntensifyDataManager\";\nimport ECSManager from \"../ECS/ECSManager\";\nimport CannonEntitiy from \"../ECS/Entities/CannonEntitiy\";\nimport EntityUtils from \"../ECS/EntityUtils\";\nimport { Chengjiou, Intensify, Task } from \"../Enum\";\nimport MapDataManager from \"../Manager/MapDataManager\";\nimport PlayerDataManager from \"../Manager/PlayerDataManager\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class GameUIControl extends UIControl {\n    private m_canMakeCount:number = 10;\n    private m_maxMakeCount:number = 10;\n    private m_hammerAction = false;\n    private m_waterAction = false;\n    private m_water:cc.Node = null;\n    private m_hammer:cc.Node = null;\n    private m_makeNumberLabel:cc.Label = null;\n    private m_cannonList = [];\n    private m_curZIndex:number=0;\n    private m_selecetCannon = null;\n    private m_moveCannon = null;\n    private m_moveCannonNode:cc.Node=null;\n\n    onLoad () {\n        super.onLoad();\n        this.m_water=this.getChildByUrl(\"bottom/make/ui_build_water\");\n        this.m_hammer=this.getChildByUrl(\"bottom/make/ui_build_hammer\");\n        this.m_makeNumberLabel=this.getChildByUrl(\"bottom/make/num\").getComponent(cc.Label);\n\n        this.updateGameUI();\n\n        this.registerBottomBtn();\n    }\n\n    start () {\n        let canvas=cc.find(\"Canvas\");\n        this.m_moveCannonNode=canvas.getChildByName(\"Game\").getChildByName(\"moveCannon\");\n\n        var _cannonList = MapDataManager.getInstance().getCurCannonPoint();\n        for (let i = 0; i < _cannonList.length; i++) {\n            this.m_cannonList[i] = this.createCannonData();\n            this.m_cannonList[i].pos = _cannonList[i];\n        }\n        this.m_curZIndex = 100;\n        this.m_moveCannonNode.on('touchstart',this.touchStart,this);\n        this.m_moveCannonNode.on('touchmove',this.touchMove,this);\n        this.m_moveCannonNode.on('touchend',this.touchEnd,this);\n        this.m_moveCannonNode.on('touchcancel',this.touchCancel,this);\n    }\n\n    touchStart(event){\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        this.m_selecetCannon = this.getCannonByPosition(nodePos);\n        if( this.m_selecetCannon != null ){\n            var cannonEntity:CannonEntitiy = this.m_selecetCannon.cannonEntity;\n            if( cannonEntity != null){\n                if( this.m_moveCannon != null ){\n                    this.m_moveCannon.removeFromParent();\n                    this.m_moveCannon = null;\n                }\n                this.m_moveCannon = cc.instantiate(cannonEntity.baseComponent.gameObject);\n                this.m_moveCannonNode.addChild(this.m_moveCannon);\n                //var cloneCannon = this.m_moveCannon.getComponent('cannon');\n                //this.showCannonRange(cannon);\n                //cannon.node.opacity = 127;\n                //this.showCannonHint(cannon.node._selfData.cannon);\n                //g_bottomUI.setShowDestroy(true);\n            }else{\n                this.m_selecetCannon = null;\n            }\n        }\n    }\n    touchMove(event){\n        if( this.m_moveCannon == null) \n            return;\n\n        var delta = event.getDelta();\n        var pos = this.m_moveCannon.getPosition();\n        pos.x += delta.x;\n        pos.y += delta.y;\n        this.m_moveCannon.setPosition(pos);\n\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        var cannon = this.getCannonByPosition(nodePos);\n        if( cannon != null ){\n            var cannonEntity = cannon.cannonEntity;\n            if( cannonEntity != null){\n                //this.showCannonRange(cannon);\n            }else{\n                //this.hideCannonRange();\n            }\n        }\n    }\n    touchEnd(event){\n        //this.setAllCannonOpacity();\n        var pos = event.getLocation();\n        let nodePos=this.m_moveCannonNode.convertToNodeSpaceAR(pos);\n        var block = this.getCannonByPosition(nodePos);\n        console.log(block)\n        if(block != null){\n            if( this.m_moveCannon != null ){\n                this.changeCannon(this.m_selecetCannon,block);\n            }\n        }\n        \n        if( this.m_moveCannon != null ){\n            this.m_moveCannon.removeFromParent();\n            this.m_moveCannon = null;\n            ///this.hideCannonHint();\n        }\n\n        \n        //this.hideCannonRange();\n\n        //g_bottomUI.setShowDestroy(false);\n\n        var pos = event.getLocation();\n        // if( g_bottomUI.isInDestroy(pos)){\n        //     this.m_selecetCannon.cannonEntity.node.removeFromParent();\n        //     this.m_selecetCannon.cannonEntity.node.destroy();\n        //     this.m_selecetCannon.cannon = null;\n        // }\n    }\n    touchCancel(event){\n        //this.setAllCannonOpacity();\n        if( this.m_moveCannon != null ){\n            this.m_moveCannon.removeFromParent();\n            this.m_moveCannon = null;\n        }\n                    \n        //this.hideCannonRange();\n        //g_bottomUI.setShowDestroy(false);\n\n        var pos = event.getLocation();\n        // if( g_bottomUI.isInDestroy(pos)){\n        //     this.m_selecetCannon.cannonEntity.node.removeFromParent();\n        //     this.m_selecetCannon.cannonEntity.node.destroy();\n        //     this.m_selecetCannon.cannon = null;\n        // }\n    }\n\n    changeCannon(startItem,endItem){\n        if( startItem.pos.x == endItem.pos.x && \n            startItem.pos.y == endItem.pos.y){\n                return;\n            }\n        let startEntity:CannonEntitiy=startItem.cannonEntity;\n        let endEntity:CannonEntitiy=endItem.cannonEntity;\n        if( startEntity == null ){\n            return;\n        }\n        //3.结束为有炮,需要合成.\n        var playEffect = false;\n        if( endEntity != null ){\n            if( EntityUtils.getInstance().cannonCompare(startEntity.roleComponent,endEntity.roleComponent)){\n                EntityUtils.getInstance().cannonLevelUp(startEntity.roleComponent,startEntity.baseComponent);\n                endEntity.unitComponent.isDead=true;\n                endEntity.baseComponent.gameObject.destroy();\n                endEntity = null;\n                playEffect = true;\n                //\n                PlayerDataManager.getInstance().addTaskCount(Task.TASK_HEBING_FANGYUTA);\n                PlayerDataManager.getInstance().addTaskCount(Chengjiou.CHENGJIOU_QIANGHUA_JINENG);\n            }\n        }\n\n        //1.结束位置没有炮\n        if( endItem == null ){\n            // var a = 1;\n            // a = 1;\n\n        }\n        if( endEntity == null ){\n            startEntity.baseComponent.gameObject.x = endItem.pos.x * 106 + 106/2;\n            startEntity.baseComponent.gameObject.y = -endItem.pos.y * 106 - 106/2;\n            startEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            startEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n            \n            endItem.cannonEntity = startItem.cannonEntity;\n            startItem.cannonEntity = endEntity;\n            if( playEffect ){\n                //endEntity.effectAction();\n            }\n        }else{\n            \n            //2.结束位置有炮,但是登陆或类型不同.\n            startEntity.baseComponent.gameObject.x = endItem.pos.x * 106 + 106/2;\n            startEntity.baseComponent.gameObject.y = -endItem.pos.y * 106 - 106/2;\n            startEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            startEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n\n            endEntity.baseComponent.gameObject.x = startItem.pos.x * 106 + 106/2;\n            endEntity.baseComponent.gameObject.y = -startItem.pos.y * 106 - 106/2;\n            endEntity.transformComponent.x=startEntity.baseComponent.gameObject.x;\n            endEntity.transformComponent.y=startEntity.baseComponent.gameObject.y;\n\n            endItem.cannonEntity = startItem.cannonEntity;\n            startItem.cannonEntity = endEntity;\n        }\n    }\n\n    createCannonData(){\n        var obj:any= {};\n        obj.pos = cc.v2(0,0);\n        obj.cannonEntity = null;\n        return obj;\n    }\n\n    getCannonByPosition(nodePos){\n        let x = Math.floor(nodePos.x/106);\n        let y = Math.floor((-nodePos.y)/106);\n        console.log(x,y);\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            if(this.m_cannonList[i].pos.x == x && this.m_cannonList[i].pos.y == y){\n                return this.m_cannonList[i];\n            }\n        }\n        return null;\n    }\n\n    getCanMakeIndex(){\n        for (let i = 0; i < this.m_cannonList.length; i++) {\n            if(this.m_cannonList[i].cannonEntity == null ){\n                return i;\n            }\n        }\n        return null;\n    }\n\n    addMakeNumber(){\n        this.m_canMakeCount++;\n        if( this.m_canMakeCount > this.m_maxMakeCount ){\n            this.m_canMakeCount = this.m_maxMakeCount;\n        }\n        this.updateMakeCount();\n    }\n\n    subMakeNumber(){\n        this.m_canMakeCount--;\n        if( this.m_canMakeCount < 0 ){\n            this.m_canMakeCount = 0;\n        }\n        if( !this.m_waterAction ){\n            this.m_water.height = 0;\n        }\n        this.updateMakeCount();\n    }\n\n    updateMakeCount(){\n        this.m_makeNumberLabel.string = '' + this.m_canMakeCount + '/' + this.m_maxMakeCount;\n    }\n\n    update (dt) {\n        if( this.m_canMakeCount < this.m_maxMakeCount){\n            this.m_water.height += dt*50;\n            this.m_waterAction = true;\n            if ( this.m_water.height >= 133 ){\n                this.addMakeNumber();\n                if( this.m_canMakeCount == this.m_maxMakeCount){\n                    this.m_water.height = 133;\n                    this.m_waterAction = false;\n                }else{\n                    this.m_water.height = 0;\n                }\n            }\n        }\n    }\n\n    updateGameUI(){\n        if( !this.m_waterAction ){\n            this.m_water.height = 0;\n        }\n        \n        var lv = PlayerDataManager.getInstance().getInternsifLevel(Intensify.INTENSIFY_KUORONG);\n        this.m_maxMakeCount = IntensifyDataManager.getInstance().getValue(Intensify.INTENSIFY_KUORONG,lv);\n        this.updateMakeCount();\n    }\n\n    registerBottomBtn(){\n        this.buttonAddClickEvent(\"bottom/make/make\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/make/autoMake\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/intensify\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/shop\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/destroy\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/cannon\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/task/bt\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin0\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin1\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin2\",this.clickBtnEvent,this);\n        this.buttonAddClickEvent(\"bottom/buffer/skill_coin3\",this.clickBtnEvent,this);\n    }\n\n    async clickBtnEvent(btn:cc.Button){\n        console.log(\"clickBtnEvent\",btn.name);\n        if(\"make<Button>\"==btn.name){\n            var index = this.getCanMakeIndex();\n            if( index == null ){\n                return;\n            }\n            if( this.m_canMakeCount == 0){\n                return;\n            }\n            if(!this.m_hammerAction ){\n                var  rot1 = cc.rotateTo(0.2,-90);\n                var rot2 = cc.rotateTo(0.2,0);\n                var callFunc = cc.callFunc(function(){\n                    this.m_hammerAction = false;\n                }.bind(this));\n                var seq = cc.sequence(rot1,rot2,callFunc);\n                this.m_hammer.runAction(seq);\n\n                this.m_hammerAction = true;\n            }\n            \n            this.subMakeNumber();\n            \n            let cannonEntity=await ECSManager.getInstance().createCannonEntity(index,0);\n            this.m_cannonList[index].cannonEntity=cannonEntity;\n        }\n        else if(\"autoMake<Button>\"==btn.name){\n\n        }\n        else if(\"intensify<Button>\"==btn.name){\n\n        }\n        else if(\"shop<Button>\"==btn.name){\n\n        }\n        else if(\"destroy<Button>\"==btn.name){\n\n        }\n        else if(\"cannon<Button>\"==btn.name){\n\n        }\n        else if(\"bt<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin0<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin1<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin2<Button>\"==btn.name){\n\n        }\n        else if(\"skill_coin3<Button>\"==btn.name){\n            \n        }\n\n    }\n\n}\n\n\n"]}